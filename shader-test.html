<!DOCTYPE html>
<html>
<head>
    <title>Shader Test</title>
</head>
<body>
    <canvas id="testCanvas" width="400" height="400"></canvas>
    <div id="output"></div>
    
    <script type="module">
        // Simple shader test
        const canvas = document.getElementById('testCanvas');
        const output = document.getElementById('output');
        
        function log(msg) {
            console.log(msg);
            output.innerHTML += msg + '<br>';
        }
        
        // Try to get WebGL context
        const gl = canvas.getContext('webgl2') || canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        
        if (!gl) {
            log('❌ No WebGL support');
        } else {
            log('✅ WebGL context created');
            log('WebGL Version: ' + gl.getParameter(gl.VERSION));
            log('Renderer: ' + gl.getParameter(gl.RENDERER));
            log('Vendor: ' + gl.getParameter(gl.VENDOR));
            
            // Test simple shader compilation
            const vertexShaderSource = `
                precision mediump float;
                attribute vec2 aPos;
                void main() {
                    gl_Position = vec4(aPos, 0.0, 1.0);
                }
            `;
            
            const fragmentShaderSource = `
                precision mediump float;
                void main() {
                    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
                }
            `;
            
            function compileShader(type, source) {
                const shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                
                if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                    const error = gl.getShaderInfoLog(shader);
                    log('❌ Shader compilation failed: ' + error);
                    return null;
                }
                return shader;
            }
            
            const vertexShader = compileShader(gl.VERTEX_SHADER, vertexShaderSource);
            const fragmentShader = compileShader(gl.FRAGMENT_SHADER, fragmentShaderSource);
            
            if (vertexShader && fragmentShader) {
                const program = gl.createProgram();
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.linkProgram(program);
                
                if (gl.getProgramParameter(program, gl.LINK_STATUS)) {
                    log('✅ Shader program created successfully');
                } else {
                    log('❌ Program linking failed: ' + gl.getProgramInfoLog(program));
                }
            }
        }
    </script>
</body>
</html>